YUI.add("gallery-busy",function(B){function A(C){A.superclass.constructor.apply(this,arguments);}A.NAME="Busy";A.NS="busy";A.ATTRS={container:{value:null,setter:B.one},selector:{value:null,validator:B.Lang.isString},globalNode:{value:null,setter:B.Node},css:{value:"yui3-gallery-busy",validator:B.Lang.isString}};B.extend(A,B.Base,{initializer:function(C){this.o=B.Node.create('<div style="position:absolute;display:none;visibility:hidden;"></div>');this.o.set("className",this.get("css"));B.one("body").prepend(this.o);B.delegate("click",function(E){if(this.isVisible()){this.hide();}var D=E.currentTarget.getData("busy");this.setVisible(D&&!B.Lang.isObject(D)?B.one(D):null,true);},C.container,C.selector,this);B.Global.on("msa-busy:show",this.show,this);B.Global.on("msa-busy:hide",this.hide,this);this.on("cssChange",function(D){this.o.set("className",D.newVal);});},destructor:function(){this.o.remove(true);this.set("globalNode",null);},isVisible:function(){return(this.o.getStyle("visibility")!="hidden");},show:function(C){this.setVisible(C,true);},hide:function(){this.setVisible(null,false);},setVisible:function(C,D){var C=C||this.get("globalNode");this.target_region=null;this.o.setStyle("display",(D?"":"none"));if(C&&D){this.resizeOverlay(C);}this.o.setStyle("visibility",(D?"":"hidden"));if(C&&D){if(!this.timer){this.timer=B.later(500,this,this.resizeOverlay,C,true);}B.one("body").addClass("yui3-busyoverlay-browser-hacks");}else{if(this.timer){this.timer.cancel();this.timer=null;}B.one("body").removeClass("yui3-busyoverlay-browser-hacks");}},resizeOverlay:function(D){var C=D.get("region");if(C&&(!this.target_region||C.top!==this.target_region.top||C.bottom!==this.target_region.bottom||C.left!==this.target_region.left||C.right!==this.target_region.right)){this.target_region=C;this.o.setXY([C.left,C.top]);this.o.setStyle("width",C.width+"px");this.o.setStyle("height",C.height+"px");}}});B.namespace("MSA");B.MSA.Busy=A;},"@VERSION@",{skinnable:true,requires:["base","node-base","node-style","event-tap","event-delegate","node-screen"]});